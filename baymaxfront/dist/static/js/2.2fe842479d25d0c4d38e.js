webpackJsonp([2],{"+U1j":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n=e("iVC1"),o={name:"job",components:{model:e("PFOP").a},data:function(){return{jobs:null,params:this.$route.query,interval_id:"",stopm:"stopm",rerunm:"rerunm",notify:"notifym",false:!1,sproject:"",rproject:"",rjob:"",response:null}},created:function(){this.fetchData()},mounted:function(){this.Interval()},beforeDestroy:function(){clearInterval(this.interval_id)},methods:{toproject:function(t){this.$router.push({name:"toproject",params:{name:t}})},Interval:function(){this.interval_id=setInterval(this.fetchData,5e3)},testlog:function(t){return"result/test/log/"+t},testreport:function(t){return"result/report/"+t},stopshow:function(t){this.sproject=t,this.$refs.stopmodelcomponent.$emit("show")},rerunshow:function(t,s){this.rproject=s,this.rjob=t,this.$refs.rerunmodelcomponent.$emit("show")},stopproject:function(){var t=this;this.response='<i class="spinner loading icon"></i>',Object(n.d)(this.sproject).then(function(s){t.response=s.data}),this.$refs.notifymodelcomponent.$emit("show")},rerunproject:function(){var t=this;this.response='<i class="spinner loading icon"></i>',Object(n.b)(this.rjob).then(function(s){t.response=s.data}),this.$refs.notifymodelcomponent.$emit("show")},fetchData:function(){var t=this;Object(n.a)(this.params).then(function(s){t.jobs=s.data})},lineclass:function(t){switch(t){case"Done":return"positive";case"Error":return"error";case"Running":case"Waiting":return"warning"}},statusclass:function(t){switch(t){case"Done":return"green checkmark";case"Error":return"red close";case"Running":return"spinner loading";case"Waiting":return"sync loading"}},resultclass:function(t){switch(t){case"PASS":return"positive";case"Running":return"warning";case"FAIL":case"Error":return"error"}},buttonclass:function(t){if("Running"!==t)return"disabled"}}},a={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("table",{staticClass:"ui compact selectable celled striped teal table"},[t._m(0),t._v(" "),e("tbody",t._l(t.jobs,function(s){return e("tr",{key:s.pk,class:t.lineclass(s.status)},[e("td",{on:{click:function(e){t.toproject(s.project)}}},[e("i",{staticClass:"clipboard list link icon"}),t._v(t._s(s.project))]),t._v(" "),e("td",[e("div",{staticClass:"ui aligned divided list"},t._l(s.servers,function(s){return e("div",{key:s,staticClass:"item"},[e("i",{staticClass:"orange server icon"}),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"header"},[t._v(t._s(s))])])])}))]),t._v(" "),e("td",[e("i",{staticClass:"icon",class:t.statusclass(s.status)}),t._v(" "),e("span",[t._v(t._s(s.status))])]),t._v(" "),e("td",[t._v(t._s(s.start_time))]),t._v(" "),e("td",[t._v(t._s(s.end_time))]),t._v(" "),e("td",[e("table",{staticClass:"ui small table very compact"},[t._m(1,!0),t._v(" "),e("tbody",t._l(s.job_test_set,function(s){return e("tr",{key:s.id},[e("td",{staticClass:"collapsing"},[t._v(t._s(s.name))]),t._v(" "),e("td",{staticClass:"collapsing"},[t._v(t._s(s.revision_number))]),t._v(" "),e("td",{staticClass:"collapsing"},[t._v(t._s(s.app))]),t._v(" "),e("td",{staticClass:"collapsing"},[t._v(t._s(s.robot_parameter))]),t._v(" "),e("td",{staticClass:"collapsing",class:t.resultclass(s.status)},[t._v(t._s(s.status))]),t._v(" "),e("td",{staticClass:"collapsing"},[e("a",{attrs:{target:"_blank",href:t.testlog(s.log)}},[e("i",{staticClass:"large file text outline icon"})])]),t._v(" "),e("td",{staticClass:"collapsing"},[e("a",{attrs:{target:"_blank",href:t.testreport(s.id)}},[e("i",{staticClass:"large file text outline icon"})])])])}))])]),t._v(" "),e("td",{staticClass:"one wide"},[e("div",{staticClass:"ui large buttons"},[e("button",{staticClass:"ui icon button red",class:t.buttonclass(s.status),on:{click:function(e){t.stopshow(s.project)}}},[e("i",{staticClass:"stop icon"})]),t._v(" "),e("button",{staticClass:"ui icon button olive",on:{click:function(e){t.rerunshow(s.pk,s.project)}}},[e("i",{staticClass:"undo icon"})]),t._v(" "),t._m(2,!0)])])])}))]),t._v(" "),e("model",{ref:"stopmodelcomponent",attrs:{name:t.stopm},on:{yes:t.stopproject}},[e("div",{attrs:{slot:"header"},slot:"header"},[t._v("Stop Project:"+t._s(t.sproject))]),t._v(" "),e("div",{attrs:{slot:"content"},slot:"content"},[t._v("Are you sure stop project?")])]),t._v(" "),e("model",{ref:"rerunmodelcomponent",attrs:{name:t.rerunm},on:{yes:t.rerunproject}},[e("div",{attrs:{slot:"header"},slot:"header"},[t._v("ReRun Project:"+t._s(t.rproject))]),t._v(" "),e("div",{attrs:{slot:"content"},slot:"content"},[t._v("Are you sure rerun project?")])]),t._v(" "),e("model",{ref:"notifymodelcomponent",attrs:{name:t.notify,noshow:!1}},[e("div",{attrs:{slot:"header"},slot:"header"},[t._v("Status")]),t._v(" "),e("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.response)},slot:"content"})])],1)},staticRenderFns:[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("thead",[e("tr",[e("th",{staticClass:"one wide"},[t._v("Project")]),t._v(" "),e("th",{staticClass:"one wide"},[t._v("Servers")]),t._v(" "),e("th",{staticClass:"one wide"},[t._v("Status")]),t._v(" "),e("th",{staticClass:"one wide"},[t._v("Start Date")]),t._v(" "),e("th",{staticClass:"one wide"},[t._v("End Date")]),t._v(" "),e("th",[t._v("Test Automation")]),t._v(" "),e("th",[t._v("Atction")])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("thead",[e("th",{staticClass:"two wide"},[t._v("Test")]),t._v(" "),e("th",{staticClass:"one wide"},[t._v("Version")]),t._v(" "),e("th",{staticClass:"three wide"},[t._v("App Log")]),t._v(" "),e("th",[t._v("Robot Parameter")]),t._v(" "),e("th",{staticClass:"one wide"},[t._v("Status")]),t._v(" "),e("th",{staticClass:"one wide"},[t._v("RunTime")]),t._v(" "),e("th",{staticClass:"one wide"},[t._v("Report")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("button",{staticClass:"ui icon button"},[s("i",{staticClass:"paper plane icon"})])}]},r=e("VU/8")(o,a,!1,null,null,null);s.default=r.exports},iVC1:function(t,s,e){"use strict";s.a=function(t){return Object(n.a)({url:"/api/job/getall",method:"get",params:t})},s.c=function(t){return Object(n.a)({url:"/api/job/"+t+"/start",method:"get"})},s.d=function(t){return Object(n.a)({url:"/api/job/"+t+"/stop",method:"get"})},s.b=function(t){return Object(n.a)({url:"/api/job/"+t+"/rerun",method:"get"})};var n=e("vLgD")}});
//# sourceMappingURL=2.2fe842479d25d0c4d38e.js.map