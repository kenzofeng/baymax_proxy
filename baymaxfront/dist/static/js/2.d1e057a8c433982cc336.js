webpackJsonp([2],{"+U1j":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("iVC1"),o={name:"job",components:{model:s("PFOP").a},data:function(){return{jobs:null,params:this.$route.query,interval_id:"",stopm:"stopm",rerunm:"rerunm",notify:"notifym",false:!1,sproject:"",rproject:"",rjob:"",response:null}},created:function(){this.fetchData()},watch:{$route:["fetchData"]},mounted:function(){this.Interval()},beforeDestroy:function(){clearInterval(this.interval_id)},methods:{onCopy:function(t){alert("You just copied: "+t.text)},toproject:function(t){this.$router.push({name:"toproject",params:{name:t}})},Interval:function(){this.interval_id=setInterval(this.fetchData,5e3)},testlog:function(t){return"result/test/log/"+t},testreport:function(t){return"result/report/"+t},downloadxml:function(t){return"result/report/"+t+"/output.xml"},stopshow:function(t){this.sproject=t,this.$refs.stopmodelcomponent.$emit("show")},rerunshow:function(t,e){this.rproject=e,this.rjob=t,this.$refs.rerunmodelcomponent.$emit("show")},stopproject:function(){var t=this;this.response='<i class="spinner loading icon"></i>',Object(n.d)(this.sproject).then(function(e){t.response=e.data}),this.$refs.notifymodelcomponent.$emit("show")},rerunproject:function(){var t=this;this.response='<i class="spinner loading icon"></i>',Object(n.b)(this.rjob).then(function(e){t.response=e.data}),this.$refs.notifymodelcomponent.$emit("show")},fetchData:function(){var t=this;this.params=this.$route.query,Object(n.a)(this.params).then(function(e){t.jobs=e.data})},lineclass:function(t){switch(t){case"Done":return"positive";case"Error":return"error";case"Running":case"Waiting":return"warning"}},statusclass:function(t){switch(t){case"Done":return"green checkmark";case"Error":return"red close";case"Running":return"spinner loading";case"Waiting":return"sync loading"}},resultclass:function(t){switch(t){case"PASS":return"positive";case"Running":return"warning";case"FAIL":case"Error":return"error"}},buttonclass:function(t){if("Running"!==t)return"disabled"}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("table",{staticClass:"ui compact selectable celled striped teal table"},[t._m(0),t._v(" "),s("tbody",t._l(t.jobs,function(e){return s("tr",{key:e.pk,class:t.lineclass(e.status)},[s("td",{on:{click:function(s){t.toproject(e.project)}}},[t._v(t._s(e.project))]),t._v(" "),s("td",[s("div",{staticClass:"ui aligned divided list"},t._l(e.servers,function(e){return s("div",{key:e.name,staticClass:"item"},[s("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.ip,expression:"server.ip",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"}],staticClass:"orange server link icon"}),t._v(" "),s("div",{staticClass:"content",attrs:{"data-tooltip":e.ip}},[s("div",{staticClass:"header"},[t._v(t._s(e.name))])])])}))]),t._v(" "),s("td",[s("i",{staticClass:"icon",class:t.statusclass(e.status)}),t._v(" "),s("span",[t._v(t._s(e.status))])]),t._v(" "),s("td",[t._v(t._s(e.start_time))]),t._v(" "),s("td",[t._v(t._s(e.end_time))]),t._v(" "),s("td",[s("table",{staticClass:"ui small table very compact"},[t._m(1,!0),t._v(" "),s("tbody",t._l(e.job_test_set,function(e){return s("tr",{key:e.id},[s("td",[t._v(t._s(e.name))]),t._v(" "),s("td",[t._v(t._s(e.revision_number))]),t._v(" "),s("td",[t._v(t._s(e.app))]),t._v(" "),s("td",[t._v(t._s(e.robot_parameter))]),t._v(" "),s("td",{class:t.resultclass(e.status)},[t._v(t._s(e.status))]),t._v(" "),s("td",[s("a",{attrs:{target:"_blank",href:t.testlog(e.log)}},[s("i",{staticClass:"large file text outline icon"})])]),t._v(" "),s("td",[s("a",{attrs:{target:"_blank",href:t.testreport(e.id)}},[s("i",{staticClass:"large file text outline icon"})])])])}))])]),t._v(" "),s("td",[s("div",{staticClass:"ui large buttons"},[s("button",{staticClass:"ui icon button red",class:t.buttonclass(e.status),on:{click:function(s){t.stopshow(e.project)}}},[s("i",{staticClass:"stop icon"})]),t._v(" "),s("button",{staticClass:"ui icon button olive",on:{click:function(s){t.rerunshow(e.pk,e.project)}}},[s("i",{staticClass:"undo icon"})]),t._v(" "),s("a",{staticClass:"ui icon button",attrs:{target:"_blank",href:t.downloadxml(e.pk)}},[s("i",{staticClass:"download icon"})])])])])}))]),t._v(" "),s("model",{ref:"stopmodelcomponent",attrs:{name:t.stopm},on:{yes:t.stopproject}},[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("Stop Project:"+t._s(t.sproject))]),t._v(" "),s("div",{attrs:{slot:"content"},slot:"content"},[t._v("Are you sure stop project?")])]),t._v(" "),s("model",{ref:"rerunmodelcomponent",attrs:{name:t.rerunm},on:{yes:t.rerunproject}},[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("ReRun Project:"+t._s(t.rproject))]),t._v(" "),s("div",{attrs:{slot:"content"},slot:"content"},[t._v("Are you sure rerun project?")])]),t._v(" "),s("model",{ref:"notifymodelcomponent",attrs:{name:t.notify,noshow:!1}},[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("Status")]),t._v(" "),s("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.response)},slot:"content"})])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{staticClass:"one wide"},[t._v("Project")]),t._v(" "),s("th",{staticClass:"one wide"},[t._v("Servers")]),t._v(" "),s("th",{staticClass:"one wide"},[t._v("Status")]),t._v(" "),s("th",{staticClass:"one wide"},[t._v("Start Date")]),t._v(" "),s("th",{staticClass:"one wide"},[t._v("End Date")]),t._v(" "),s("th",{staticClass:"ten wide"},[t._v("Test Automation")]),t._v(" "),s("th",{staticClass:"one wide"},[t._v("Atction")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("th",{staticClass:"two wide"},[t._v("Test")]),t._v(" "),s("th",{staticClass:"one wide"},[t._v("Version")]),t._v(" "),s("th",{staticClass:"four wide"},[t._v("App Log")]),t._v(" "),s("th",{staticClass:"six wide"},[t._v("Robot Parameter")]),t._v(" "),s("th",{staticClass:"one wide"},[t._v("Status")]),t._v(" "),s("th",{staticClass:"one wide"},[t._v("RunTime")]),t._v(" "),s("th",{staticClass:"one wide"},[t._v("Report")])])}]},a=s("VU/8")(o,r,!1,null,null,null);e.default=a.exports},iVC1:function(t,e,s){"use strict";e.a=function(t){return Object(n.a)({url:"/api/job/getall",method:"get",params:t})},e.c=function(t){return Object(n.a)({url:"/api/job/"+t+"/start",method:"get"})},e.d=function(t){return Object(n.a)({url:"/api/job/"+t+"/stop",method:"get"})},e.b=function(t){return Object(n.a)({url:"/api/job/"+t+"/rerun",method:"get"})};var n=s("vLgD")}});
//# sourceMappingURL=2.d1e057a8c433982cc336.js.map